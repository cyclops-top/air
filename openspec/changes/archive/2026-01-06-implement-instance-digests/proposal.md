# Proposal: 实现 RFC 3230/5843 实例摘要 (Digest) 与内存缓存

## Why
在局域网分享文件时，确保文件传输的完整性至关重要。目前 `air` 仅通过 TCP 保证传输，但缺乏应用层的校验手段。通过实现 RFC 3230 (Instance Digests) 和 RFC 5843 (Hash Algorithms)，我们可以在 HTTP 响应头中提供文件的 SHA-256 摘要。通过内存缓存，可以避免对未修改的文件进行重复哈希计算，平衡安全与性能。

## What Changes
- **核心逻辑**: 在提供文件下载时，计算文件的 SHA-256 哈希值。
- **协议支持**: 在 HTTP 响应中注入 `Digest` 头部，格式符合 `Digest: SHA-256=<base64-value>`。
- **内存缓存**: 在 `AppState` 中引入并发安全的哈希缓存。缓存键由文件路径、大小和最后修改时间组成，确保文件变动时校验码自动更新。
- **性能优化**: 使用流式读取计算哈希，避免将整个文件加载到内存。
- **依赖添加**: 引入 `sha2`, `base64`, `dashmap` crate。

## Impact
- **可靠性**: 接收方（如下载工具、浏览器插件）可以验证文件是否完整。
- **性能**: 首次计算大文件哈希会有一定 CPU 开销，后续请求将直接从缓存读取。
