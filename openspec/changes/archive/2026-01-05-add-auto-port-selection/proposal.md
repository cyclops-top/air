# Proposal: 自动端口选择与重试机制

## Why
目前 `air` 默认监听 8000 端口。如果该端口被占用，程序会报错并退出。为了提升易用性，特别是在自动化或多实例运行场景下，程序应支持在未指定端口时自动选择可用端口，并确保服务一定能够启动。

## What Changes
- **CLI 参数调整**: `port` 参数将不再有默认值（变为 `Option<u16>`）。
- **随机端口逻辑**: 当用户未提供 `--port` 时，程序在指定范围（10000 - 65535）内随机选择端口。
- **占用重试**: 如果选中的随机端口已被占用，程序将自动重新选择并重试，直到成功绑定。
- **特定端口处理**: 如果用户通过 `--port` 指定了端口但该端口被占用，程序应报错退出（维持现有行为），或可选地也支持自动递增（本提案优先实现随机重试）。
- **依赖添加**: 引入 `rand` crate 用于生成随机数。

## Impact
- **健壮性**: 服务启动不再受限于固定端口的可用性。
- **用户体验**: 真正实现“一键启动”，无需担心端口冲突。
