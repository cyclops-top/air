# Proposal: 实现 ETag 支持与高效缓存验证

## Why
目前 `air` 虽然支持了 `Digest` 和 `Range`，但尚未实现 HTTP 标准的缓存验证机制。每当用户刷新浏览器或重新请求文件时，即使文件内容未变，服务器也会发送完整的文件内容。通过引入 `ETag` (Entity Tag) 并支持 `If-None-Match` 头部，我们可以实现 `304 Not Modified` 响应，显著节省带宽并提升响应速度。

## What Changes
- **复用哈希**: 将已有的 SHA-256 摘要作为强 ETag 标识符。
- **缓存协商逻辑**: 在 `src/handlers.rs` 中增加对 `If-None-Match` 头的校验逻辑。
- **响应优化**:
    - 如果 ETag 匹配，则直接返回 `304 Not Modified`，不读取文件内容。
    - 在所有文件响应（200, 206）中增加 `ETag` 头部。
- **一致性**: 确保 `ETag` 能够与 `If-Range` 等头部配合，提升断点续传的可靠性。

## Impact
- **带宽节省**: 重复请求相同文件时不再消耗下载流量。
- **用户体验**: 页面加载和文件验证变得几乎瞬时完成。
- **符合标准**: 使 `air` 的协议实现更贴近生产级静态服务器。
